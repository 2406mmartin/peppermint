version: "3.1"

services:
  postgres:
    container_name: postgres
    image: postgres:latest
    restart: always
    volumes:
      - ./peppermint/db:/data/db
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: 1234
      POSTGRES_DB: peppermint
    ports:
      - 5432:5432

  mailhog:
    container_name: mailhog
    image: mailhog/mailhog:latest
    restart: always
    volumes:
      - ./peppermint/db:/data/db
    user: root
    expose:
      - 8025
    ports:
      - 8025:8025
      - 1025:1025
    healthcheck:
      test: echo | telnet 127.0.0.1 1025

  # keycloak:
  #   image: quay.io/keycloak/keycloak:20.0.5
  #   command: sh -c "echo "kc.sh start-dev""
  #   environment:
  #     DB_VENDOR: POSTGRES
  #     DB_ADDR: postgres
  #     DB_DATABASE: keycloak
  #     DB_USER: peppermin
  #     DB_SCHEMA: public
  #     DB_PASSWORD: 1234
  #     KEYCLOAK_USER: admin
  #     KEYCLOAK_PASSWORD: Pa55w0rd
  #     # Uncomment the line below if you want to specify JDBC parameters. The parameter below is just an example, and it shouldn't be used in production without knowledge. It is highly recommended that you read the PostgreSQL JDBC driver documentation in order to use it.
  #     #JDBC_PARAMS: "ssl=true"
  #   ports:
  #     - 8080:8080
  #   depends_on:
  #     - postgres
  #   restart: unless-stopped

  minio:
    image: minio/minio
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_storage:/data
    environment:
      MINIO_ROOT_USER: peppermint
      MINIO_ROOT_PASSWORD: peppermint#Strong#Password
    command: server --console-address ":9001" /data

volumes:
  minio_storage: {}
